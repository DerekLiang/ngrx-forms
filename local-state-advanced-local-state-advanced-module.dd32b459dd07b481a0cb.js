(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{fuff:function(t,e,o){"use strict";o.r(e),o.d(e,"LocalStateAdvancedModule",function(){return T});var n=o("ofXK"),a=o("tyNb"),r=o("9jGm"),c=o("atpF"),s=o("PCNd"),i=o("quSY"),u=o("l7P3");let l=(()=>{class t{constructor(e){this.countryCode=e,this.type=t.TYPE}}return t.TYPE="localStateAdvanced/GET_MANUFACTURERS",t})(),d=(()=>{class t{constructor(e){this.manufacturers=e,this.type=t.TYPE}}return t.TYPE="localStateAdvanced/SET_MANUFACTURERS",t})();const h=Object(c.A)("localStateForm",{countryCode:"",manufacturer:""}),b={manufacturers:[],formState:h},f=Object(u.m)({manufacturers:(t=[],e)=>e.type===d.TYPE?e.manufacturers:t,formState:(t=h,e)=>Object(c.E)(t,e)});var m=o("fXoL"),p=o("zrVV");function S(t,e){if(1&t&&(m.Sb(0,"option",4),m.zc(1),m.Rb()),2&t){const t=e.$implicit;m.ic("value",t),m.Cb(1),m.Bc(" ",t," ")}}let g=(()=>{class t{constructor(t,e){this.actionsSubject=t,this.cd=e,this.localState=b,this.subscription=new i.a}ngOnInit(){this.subscription=this.actionsSubject.subscribe(t=>{this.updateState(t)&&this.cd.detectChanges()})}ngOnDestroy(){this.subscription.unsubscribe()}handleFormAction(t){this.updateState(t),t.type===c.w.TYPE&&t.controlId===this.localState.formState.controls.countryCode.id&&this.actionsSubject.next(new l(t.value))}updateState(t){const e=function(t=b,e){let o=f(t,e);if(o===t)return o;const n=Object(c.J)({manufacturer:t=>o.manufacturers.includes(t.value)?t:Object(c.H)("")(t)})(o.formState);return n!==o.formState&&(o=Object.assign(Object.assign({},o),{formState:n})),o}(this.localState,t),o=e!==this.localState;return this.localState=e,o}}return t.\u0275fac=function(e){return new(e||t)(m.Nb(u.a),m.Nb(m.h))},t.\u0275cmp=m.Hb({type:t,selectors:[["ngf-local-state-advanced"]],decls:26,vars:6,consts:[["exampleName","Local state: Advanced","githubLinkOverride","local-state-advanced",3,"formState"],[3,"ngrxFormState","ngrxFormsAction"],["type","text",3,"ngrxFormControlState","ngrxFormsAction"],[3,"ngrxFormControlState","ngrxFormsAction"],[3,"value"],[3,"value",4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(m.Sb(0,"ngf-form-example",0),m.zc(1," Advanced example that shows how you can disable emitting any form actions to the global store via the builtin ActionsSubject. Instead, you can listen for actions using the directive's output EventEmitter and route them to the component. "),m.Ob(2,"br"),m.zc(3," The component holds, updates and maintains a local state, which does not taint the global store and is automatically cleaned up once the component is destroyed. "),m.Ob(4,"br"),m.zc(5," In addition to the form data, the component requests and saves additional data from an external effect. The update logic is located in the reducer, which handles inter-dependencies between form data and additional data. "),m.Ob(6,"br"),m.Ob(7,"br"),m.Ob(8,"br"),m.Sb(9,"form",1),m.Zb("ngrxFormsAction",function(t){return e.handleFormAction(t)}),m.Sb(10,"div"),m.Sb(11,"p"),m.zc(12,' The entered country code impacts what you see in the manufacturer dropdown. Enter "US" or "UK" for some manufacturers, otherwise the list will be empty. '),m.Rb(),m.Rb(),m.Sb(13,"div"),m.Sb(14,"label"),m.zc(15,"CountryCode"),m.Rb(),m.Sb(16,"div"),m.Sb(17,"input",2),m.Zb("ngrxFormsAction",function(t){return e.handleFormAction(t)}),m.Rb(),m.Rb(),m.Rb(),m.Sb(18,"div"),m.Sb(19,"label"),m.zc(20,"Manufacturer"),m.Rb(),m.Sb(21,"div"),m.Sb(22,"select",3),m.Zb("ngrxFormsAction",function(t){return e.handleFormAction(t)}),m.Sb(23,"option",4),m.zc(24," None "),m.Rb(),m.yc(25,S,2,2,"option",5),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb()),2&t&&(m.ic("formState",e.localState.formState),m.Cb(9),m.ic("ngrxFormState",e.localState.formState),m.Cb(8),m.ic("ngrxFormControlState",e.localState.formState.controls.countryCode),m.Cb(5),m.ic("ngrxFormControlState",e.localState.formState.controls.manufacturer),m.Cb(1),m.ic("value",""),m.Cb(2),m.ic("ngForOf",e.localState.manufacturers))},directives:[p.a,c.r,c.k,c.e,c.j,c.q,c.n,c.p,c.f,n.k],styles:[".page[_ngcontent-%COMP%], [_nghost-%COMP%]{flex:1;height:100%;display:flex;align-items:flex-start;background-color:#ddd;overflow:auto}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}"],changeDetection:0}),t})();var v=o("mrSG"),y=o("Kj3r"),w=o("D0XW"),x=o("mlxB"),C=o("7o/Q"),O=o("WMd4");class F{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new A(t,this.delay,this.scheduler))}}class A extends C.a{constructor(t,e,o){super(t),this.delay=e,this.scheduler=o,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,o=e.queue,n=t.scheduler,a=t.destination;for(;o.length>0&&o[0].time-n.now()<=0;)o.shift().notification.observe(a);if(o.length>0){const e=Math.max(0,o[0].time-n.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(A.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,o=new j(e.now()+this.delay,t);this.queue.push(o),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(O.a.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(O.a.createComplete()),this.unsubscribe()}}class j{constructor(t,e){this.time=t,this.notification=e}}var R=o("lJxs");let E=(()=>{class t{constructor(t){this.actions$=t,this.getManufacturers$=this.actions$.pipe(Object(r.d)(l.TYPE),Object(y.a)(300),function(t,e=w.a){const o=Object(x.a)(t)?+t-e.now():Math.abs(t);return t=>t.lift(new F(o,e))}(1e3),Object(R.a)(t=>new d("US"===t.countryCode?["Ford","Chevrolet"]:"UK"===t.countryCode?["Aston Martin","Jaguar"]:[])))}}return t.\u0275fac=function(e){return new(e||t)(m.Wb(r.a))},t.\u0275prov=m.Jb({token:t,factory:t.\u0275fac}),Object(v.a)([Object(r.b)()],t.prototype,"getManufacturers$",void 0),t})(),T=(()=>{class t{}return t.\u0275mod=m.Lb({type:t}),t.\u0275inj=m.Kb({factory:function(e){return new(e||t)},imports:[[n.c,c.i,s.a,a.i.forChild([{path:"",component:g}]),r.c.forFeature([E])]]}),t})()}}]);