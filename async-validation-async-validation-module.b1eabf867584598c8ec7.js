(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"/Xot":function(e,t,n){"use strict";n.r(t),n.d(t,"AsyncValidationModule",function(){return J});var s=n("ofXK"),r=n("tyNb"),o=n("9jGm"),i=n("l7P3"),c=n("atpF"),a=n("quTh"),l=n("PCNd"),u=n("fXoL"),b=n("zrVV"),h=n("AVnP");function f(e,t){1&e&&(u.Sb(0,"span"),u.zc(1,"Searching..."),u.Rb())}function m(e,t){1&e&&(u.Sb(0,"li"),u.zc(1," The search returned no results "),u.Rb())}function d(e,t){1&e&&(u.Sb(0,"li"),u.zc(1," The number of results must be specified "),u.Rb())}function p(e,t){1&e&&(u.Sb(0,"li"),u.zc(1," The number of results must be at least 1 "),u.Rb())}function g(e,t){if(1&e&&(u.Sb(0,"ul",7),u.yc(1,m,2,0,"li",4),u.yc(2,d,2,0,"li",4),u.yc(3,p,2,0,"li",4),u.Rb()),2&e){const e=u.dc().ngIf;u.Cb(1),u.ic("ngIf",null==e.errors._searchTerm?null:e.errors._searchTerm.$exists),u.Cb(1),u.ic("ngIf",null==e.errors._numberOfResultsToShow?null:e.errors._numberOfResultsToShow.required),u.Cb(1),u.ic("ngIf",null==e.errors._numberOfResultsToShow?null:e.errors._numberOfResultsToShow.greaterThan)}}function y(e,t){if(1&e&&(u.Sb(0,"li"),u.zc(1),u.Rb()),2&e){const e=t.$implicit;u.Cb(1),u.Bc(" ",e," ")}}function S(e,t){if(1&e&&(u.Sb(0,"ul"),u.yc(1,y,2,1,"li",8),u.Rb()),2&e){const e=u.dc().ngIf;u.Cb(1),u.ic("ngForOf",e)}}function O(e,t){if(1&e&&(u.Qb(0),u.yc(1,S,2,1,"ul",4),u.Pb()),2&e){const e=t.ngIf;u.Cb(1),u.ic("ngIf",e.length>0)}}function v(e,t){if(1&e&&(u.Sb(0,"ngf-form-example",1),u.zc(1," This example shows how to perform asynchronous validation. The entered text will be used to search Google books and will return up to the entered number of results. Please note that this example uses the Google books API anonymously and is therefore rate limited. This means sometimes the search will not return a result even if the search term is valid. "),u.Ob(2,"br"),u.Ob(3,"br"),u.Sb(4,"div",2),u.Sb(5,"label"),u.zc(6,"Search Term"),u.Rb(),u.Sb(7,"div"),u.Ob(8,"input",3),u.yc(9,f,2,0,"span",4),u.Rb(),u.Rb(),u.Sb(10,"div",2),u.Sb(11,"label"),u.zc(12,"Nr of results"),u.Rb(),u.Sb(13,"div"),u.Ob(14,"input",5),u.Rb(),u.Rb(),u.yc(15,g,4,3,"ul",6),u.yc(16,O,2,1,"ng-container",4),u.ec(17,"async"),u.Rb()),2&e){const e=t.ngIf,n=u.dc();u.ic("formState",e),u.Cb(8),u.ic("ngrxFormControlState",e.controls.searchTerm),u.Cb(1),u.ic("ngIf",e.isValidationPending),u.Cb(5),u.ic("ngrxFormControlState",e.controls.numberOfResultsToShow),u.Cb(1),u.ic("ngIf",e.isInvalid),u.Cb(1),u.ic("ngIf",u.fc(17,6,n.searchResults$))}}let w=(()=>{class e{constructor(e){this.formState$=e.pipe(Object(i.t)(e=>e.asyncValidation.formState)),this.searchResults$=e.pipe(Object(i.t)(e=>e.asyncValidation.searchResults))}}return e.\u0275fac=function(t){return new(t||e)(u.Nb(i.h))},e.\u0275cmp=u.Hb({type:e,selectors:[["ngf-async-validation"]],decls:2,vars:3,consts:[["exampleName","Asynchronous Validation","githubLinkOverride","async-validation",3,"formState",4,"ngIf"],["exampleName","Asynchronous Validation","githubLinkOverride","async-validation",3,"formState"],[1,"control"],["type","text",3,"ngrxFormControlState"],[4,"ngIf"],["type","number",3,"ngrxFormControlState"],["class","error-messages",4,"ngIf"],[1,"error-messages"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(u.yc(0,v,18,8,"ngf-form-example",0),u.ec(1,"async")),2&e&&u.ic("ngIf",u.fc(1,1,t.formState$))},directives:[s.l,b.a,c.e,h.a,c.g,c.r,c.l,s.k],pipes:[s.b],styles:[".page[_ngcontent-%COMP%], [_nghost-%COMP%]{flex:1;height:100%;display:flex;align-items:flex-start;background-color:#ddd;overflow:auto}.control[_ngcontent-%COMP%]{display:flex;padding:5px}.control[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{width:100px;float:right;display:flex;justify-content:flex-end;margin-right:10px;font-weight:700;line-height:21px}.control[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1}.error-messages[_ngcontent-%COMP%]{color:#e20000}"],changeDetection:0}),e})();var x=n("mrSG"),T=n("GyhO"),R=n("PqYM"),C=n("pLZG"),j=n("zx2A");class _{constructor(e,t){this.keySelector=e,this.flushes=t}call(e,t){return t.subscribe(new I(e,this.keySelector,this.flushes))}}class I extends j.b{constructor(e,t,n){super(e),this.keySelector=t,this.values=new Set,n&&this.add(Object(j.c)(n,new j.a(this)))}notifyNext(){this.values.clear()}notifyError(e){this._error(e)}_next(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)}_useKeySelector(e){let t;const{destination:n}=this;try{t=this.keySelector(e)}catch(s){return void n.error(s)}this._finalizeNext(t,e)}_finalizeNext(e,t){const{values:n}=this;n.has(e)||(n.add(e),this.destination.next(t))}}var P=n("eIep"),k=n("lJxs"),z=n("5+tZ"),V=n("JIr8"),M=n("+Mqz");let F=(()=>{class e{constructor(t){this.results=t,this.type=e.TYPE}}return e.TYPE="asyncValidation/SET_SEARCH_RESULT",e})();const N=Object(c.A)("asyncValidation",{searchTerm:"",numberOfResultsToShow:5}),A=Object(c.B)(Object(c.J)({searchTerm:Object(c.L)(M.d),numberOfResultsToShow:Object(c.L)(M.d,Object(M.b)(0))})),L=Object(i.m)({formState:(e=N,t)=>A(e,t),searchResults:(e=[],t)=>t.type===F.TYPE?t.results:e});function $(e,t){return L(e,t)}var E=n("tk/3");let G=(()=>{class e{constructor(e,t){var n;this.store=e,this.httpClient=t,this.searchBooks$=this.store.pipe(Object(i.t)(e=>e.asyncValidation.formState),Object(C.a)(e=>!!e.value.searchTerm&&e.controls.numberOfResultsToShow.isValid),(n=e=>e.value,e=>e.lift(new _(n,void 0))),Object(P.a)(e=>Object(T.a)(Object(R.a)(300).pipe(Object(k.a)(()=>new c.x(e.controls.searchTerm.id,"exists"))),this.httpClient.get("https://www.googleapis.com/books/v1/volumes",{params:{q:e.value.searchTerm,maxResults:""+e.value.numberOfResultsToShow}}).pipe(Object(z.a)(t=>t.totalItems>0?[new F(t.items.map(e=>e.volumeInfo.title)),new c.b(e.controls.searchTerm.id,"exists")]:[new F([]),new c.v(e.controls.searchTerm.id,"exists",e.value.searchTerm)]),Object(V.a)(t=>[new F([]),new c.v(e.controls.searchTerm.id,"exists",e.value.searchTerm)])))))}}return e.\u0275fac=function(t){return new(t||e)(u.Wb(i.h),u.Wb(E.a))},e.\u0275prov=u.Jb({token:e,factory:e.\u0275fac}),Object(x.a)([Object(o.b)()],e.prototype,"searchBooks$",void 0),e})(),J=(()=>{class e{}return e.\u0275mod=u.Lb({type:e}),e.\u0275inj=u.Kb({factory:function(t){return new(t||e)},imports:[[s.c,a.a,c.i,l.a,r.i.forChild([{path:"",component:w}]),i.j.forFeature("asyncValidation",$),o.c.forFeature([G])]]}),e})()}}]);